# Project 1 - Assembler and Linker for a Custom Assembly Language

:brazil: **For Portuguese version, read [README-pt.md](README-pt.md).**

## Authors

Gustavo Santana Lima - 211038235  
Yan Tavares - 202014323

## Index

- [Usage](#Usage)
- [Notes](#Notes)
- [Simulation](#Simulating-the-execution-of-the-obj-file)
- [Project Structure](#Project-structure)
- [Contact](#Contact)

## Usage

### Option 1 - Using `make` to compile the files and run them manually:

```bash
make
```

This will create the executable file `montador`. With it, you can assemble and link `.asm` and `.obj` files:

1. To view all available options, run:

```bash
./montador --help
```

or

```bash
./montador -h
```

2. To **only** pre-process a `.asm` file and generate a `.pre` file, run:

```bash
./montador -p <file.asm>
```

3. To **only** assemble a pre-processed `.pre` file and generate an `.obj` file (or `.e` in the case of linkable files), run:

```bash
./montador -o <file.asm>
```

4. To **only** link two `.e` files and generate a resulting `.obj` file, run:

```bash
./montador -l <file1.e> <file2.e>
```

The `obj` file will have the name of the first file passed as an argument + `_linked.obj`.

Note: You can also use the precompiled `montador` file in the `bin/` directory.

### Option 2 - Using `make` to compile and run the files automatically:

1. To compile the assembler, generate the `.pre` file, and assemble a `.asm` file, run:

```bash
make as file=<file.asm>
```

2. To compile the assembler, generate the `.pre` file, assemble the `.e` file, and link two files, generating the resulting `obj` file, run:

```bash
make ld file1=<file1.asm> file2=<file2.asm>
```

The `obj` file will have the name of the first file passed as an argument + `_linked.obj`.

3. To clean the generated `.o` files, run:

```bash
make clean
```

## Notes

- The files generated by the assembler are saved in the same directory as the input file.
- The assembler and linker have been tested on the following environments: (Ubuntu 20.04, POP_OS 22.04, and WSL on Windows 11).
- The files used for testing can be found in the `Arquivos/` folder.
- The `CONST` directive accepts both decimal and hexadecimal numbers.

## Simulating the execution of the `.obj` file

To simulate the execution of an `.obj` file, you need to use the simulator. To do so, run:

```bash
./bin/simulador <file.obj>
```

## Project Structure

```
TRABALHO1
│ README.md
│ makefile
│ main.cpp
│
├── bin
│ │ montador
│ │ simulador
│
├── src
│ │ LIGADOR.cpp
│ │ MONTADOR.cpp
│ │ PRE_PROCESSADOR.cpp
│
├── include
│ │ LIGADOR.hpp
│ │ MONTADOR.hpp
│ │ PRE_PROCESSADOR.hpp
│
├── docs
│ │ documentation.md
│
├── Arquivos
│ │ file1.asm
│ │ ...
│
```

## Contact

If you wish to get in touch, send an email to either of the authors:

- [yantdo1@gmail.com](mailto:yantdo1@gmail.com)
- [guts.santana@gmail.com](mailto:guts.santana@gmail.com)